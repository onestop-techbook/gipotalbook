# 画面を作っていく(モブ#7 7/9)

前回までで、HasuraをReact上で動かし、クエリによりデータを引き出すことができました。あとはもうプロジェクトに合わせて作り込んでいくだけです。いよいよページの本体を作り始めましょう。まずはサークルページからはじめます。

## サークルページを作る
トップ画面を作る？サークル画面を作る？本の画面を作る？そのうえで、データはべた書きで、CSSをいくつか書いていく形で進めるのがよさげ、ということで、サークル画面を作ることにしました。

![Figmaで組んだサークルページ](chap-mob-0709/circlefigma.png?scale=0.8)

実際に始める前に、CSSのタグに絡むWarningが出た話から、CSS_moduleの扱いの話になります。bodyにつけるスタイルはglobal.cssみたいなのを書いて、 pages/_app.js でインポートするのが定石[^css]だといった話が一通り行われます。

[^css]: https://nextjs.org/docs/basic-features/built-in-css-support 

ではモブワーク開始です。Figmaで仮組したサークルページを見ながら進めます。

Figma上で、alt か optionを押しながら要素を触ると、要素間のマージン(要素間の距離)が見えたりします。ですので、これに合うようにCSSを当てていくのが基本的な動きになります。

そして、デザインを考えずに「箱から作っていく」という方法で進めます。サークル名などはヘッダー、サークル説明はディスクリプション、配布物はアイテムといったコンポーネントに分割することができるので、それぞれのコンポーネントを作っていきます。

`pages/circles/[id]/index.tsx`を作ります。

異論はありましょうが、今の時代TypeScriptを使っておけば問題ないということで、TypeScriptで進めます。

#### [column] TypeScriptの設定で相対Pathを通す

参照関係が複雑になってくると、/../../componenst/hogeのように階層が複雑になることがあります。そこで、tsconfig.jsonにpathを設定してシンプルに読み替えることができます。

```js
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@/*": ["src/*"],
    },
```
`@/`と書くだけで`src/`を参照するようにできます。
#### [/column]

### Headerを作る

ヘッダーを作ります。が、その前に、いろいろ参照についての話[^import]をひとしきりやります。結果としては予想外に盛り上がりました。

冒頭で、このあと使用するモジュールをインポートします。

NextPageをnextからインポートしていますが。これを”名前付きインポート”と呼び、波カッコをつけて表記します。これはnextというモジュールからNextPageという決められたモジュールを読み込むことを意味します。対して1行目にあるように、React全体をインポートするのは、デフォルトインポートと呼びます。ただし、1行目は、コンパイルのときにエラーが出るのでおまじないだと思っていてよいです。

波かっこが付く場合と付かない場合について、あるいは分割代入について説明、共有がなされ、何となく共通認識ができたような気がします。

```js
const { id } = router.query
const id = router.query.id
```
この2行は同じ内容を意味します。

NextのPage型はgetStaticPropsとかgetServerSidePropsがついたReact.FC なので、波かっこ付きで名前付きインポートすることになります。

```js
import React from "react"; // React というでかいすべてを取ってくる
import { useRouter } from "next/router"; // useRouter という単体の関数を取ってくる
import { NextPage } from "next"; // NextPage という単体の型を取ってくる
```

NextPageという型が設定できたので、補完が効くようになったり、型支援が効くようになり、いろいろ便利になります。関数として定義されるので、想定しない引数が指定されたりしたときにエラーが出るようになります。

[^import]: インポートの参考ページ:https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Statements/import


このあたりの準備と説明で思ったより時間がかかってしまいましたが、いよいよ実際に本体を作り始めます。まずはヘッダーから。

### ヘッダータグをつける

まずは、ヘッダーにサークル名を表示します。親方Projectと表示しましょう。
```js
const Header: React.FC = () => {
  return <header>親方Project</header>
}

const CirclesShow: NextPage = () => {
　return <Header />
}

export default CirclesShow
```

これで、ブラウザ上には、親方Projectという文字が表示されるはずです。

同じような記述は別ファイルに書き出すことが望ましいのですが、一旦べた書きに近い形で、いろいろなコンポーネントを一つのファイル内にまとめて書いていきます。ファイル書き出しについては後日やりましょう。

### 画像を画像を貼り付ける。

次は、ロゴ画像を貼り付けます。ヘッダーのトップに置きます。
ファイルをどこに置くかといったお作法もいくつか流儀があるようです。/src/images/logo.svgをコピーします。モブでファイルを作ったりコピーしたりするのを同時に複数人でやろうとすると、ファイルが見つからなかったり、すでにあったりして逆に手間取ることがあるので、ホストの人またはその時のドライバーがやるなど決めておいた方がお見合いがなくなるでしょう。VSCodeのLive Shareでファイルをいじるのは上手くいかないこともあるようです。

```js
import Logo from '@/images/Logo.svg' //上手く読み込みできなかった

return <header><img src="@/images/logo.svg"/>親方Project</header> //やっぱりだめ

return <header><img src="/images/logo.svg"/>親方Project</header>　//OK

```

画像ファイルは、`public/images/logo.svg`に置きます。これで画像が表示されます。それっぽくなってきましたね。


Shift+Opt+Fを押すと、オートフォーマッタによるインデント修正が可能ですので、時々インデントを直しましょう。見た目がきれいになり、誤読も減るでしょう。

#### [column] Web会議で目線が合わない

雑談かつ、リモート会議あるあるです。そもそも目線を合わせる必要がないのはありますが、PCのカメラではうまく合わないときの話。

大きめディスプレーの上にWebカメラを置いて、映っているものをディスプレーの上方に置くと、目線を合わせやすくなります。そもそも、合わせる必要があるのか、もっと言えば、顔を映す必要があるのか、というあたりに疑問がありますが。

#### [/column]

## まとめと振り返り
サークルのトップページを作り始めました。ロゴ画像を表示したり、Headerを作ってヘッダーコンポーネントを配置したり、ボタンを作って、形を整えたり新規登録やログインという表示をしたり。

それと一緒に、importの違い(デフォルトインポートと単なるインポートの違い)などを共有しました。次回予定は、7月11日に、情報を載せていくあたりですね。

![本日やったこと](chap-mob-0709/0709-done.png?scale=0.8)

![7月9日のFun Done Learn](chap-mob-0709/0709fundonelearn.png?scale=0.8)