# サークルページを組む（モブ#9 7/11）
いよいよサークルページを組み始めます。

その前に、サークルページに表示する内容を再確認しましょう。

## サークルページに表示する内容
先日、DBに格納する内容は概ね共有しました。しかしサークルページと考えた場合、改めて必要なもの、不要なものをデザインとして考える必要があります。

まずは、技術書典のサークルページ、頒布物ページから考えます。

ふりがな、メールアドレスなどはユーザー情報として必要ですが、サークルページに表示する必要がない情報です。まずはこれらを整理します。

トップに表示される内容としては、サークル名、サークル紹介文、参加イベントリスト、頒布物の一覧、そして、Webサイトとして、サークルごとのWebサイト、GitHubやTwitter、Boothのトップページなどが挙げられます。また、サークルのメインになるジャンルなども表示して欲しいところですね。

必要な項目、必要だけど優先度の低い項目を整理したら、モックアップと比較しつつ、デザインとして追加していきます。

![表示するもの](chap-mob-0711/items.png?scale=0.8)

GitHub、Twitter、Boothなどは、リンクとしてグループ化して考えます。

他のイベントのページとして、技書博、コミケ（Circle.ms）もチェックします。同じような目的ですから、内容は似たようなものになりますね。

イベントのページにはあって、このポータルでは不要な項目としては、配置があります。あくまでイベント横断のポータルサイトですから、サークルトップには記載しません。

7月2日にDB構築の中で確認・抽出した項目と比較し、漏れがないか確認します。商業誌声かけフラグが漏れていたので、これを抽出し、ただし実装は後ほどとしました。MVPとしてこれが必要かという判定を行うと、優先度が下がるためです。

また、寄稿者・著者一覧は、本に紐づく情報なので、本のページに属する情報とします。

#### [column] 商業化声掛けフラグについて
トップページに載せるものの中でいったん後回しになった、「商業化声掛けフラグ」についての説明です。

技術同人誌では、商業化しませんか？という声掛けがなされることがあります。本として認められたというステータスになることや、著者の実績、ポートフォリオとしてのメリット、あるいは親に渡すと喜ばれるといったプラスの面があります。またAmazonなどに乗ることによる販路拡大、読者へのリーチが広がるという点もメリットです。一方で商業化することで、印税率が下がり、売れたときの収入は間違いなく少なくなります。技術書1冊では到底食べていくことはできません。また本としての自由度が下がり、同人版を頒布終了とする必要がある場合がある（ただし出版社との契約次第）など、著者の自由にならないことも少なくありません。

さて、出版社が「これは」という本を見つけたとき、「この本、商業出版しませんか？」という声掛けがなされます。この時、商業化するかどうかは絶対的に著者、サークル主の自由です。しかし、声掛けしてもらってうれしい/声掛けしてくれて構わないと考える人と、そのオファー自体を嫌がる人がいるのは事実です。

人づてに聞いた話ですが、出版社の側からも、その著者・サークル主がうれしいと思うのか嫌だと思うのかわからないので声掛けしづらい、という話があるそうです。

そのため、サークル単位で、商業化声掛けを歓迎するのか、拒否するのかをわかりやすく表示したいと考えました。

商業出版する気がない、声掛けすら嫌だと思うサークルにとっては、声がかけられて嫌な思い、手間を取られる可能性を減らす一助になればと思います。

声掛けOKなサークルにとっても、話を聞く準備があるのかどうかがわかることで、今までよりカジュアルに声掛けがなされる可能性があります。もちろん、声掛け歓迎とはいいつつ、本の個別事情や商業化の条件次第で断ることも自由です。あくまで声かけOKというだけで、商業出版しますという意図ではないことは明記する予定です。

#### [/column]

## CSSリセットをする

ブラウザはデフォルトのCSSを持っているのですが、今時デザインするのに邪魔なのです。ですから、最初にリセットして、自前のCSSを適用するように行うものです。

_app.js というファイルを作り、ここに、CSS Remedyをコピペして貼り付けます。

https://coliss.com/articles/build-websites/operation/css/css-reset-for-modern-browser.html

貼り付けた直後は一行のままですが、オートフォーマットを使います。
Shift+Alt+Fで改行を入れたフォーマットに変更することができます。
全ページに適用されます。

例えば、また、CSS Remedyと異なる挙動を追加したい場合、例えばリンクの下線を引かないようなクラスを追加する場合は、aというクラスに対し、
```css
a {
    text-decoration: none;
}
```
と付け加えます。すると、全ページのリンクから下線が無くなります。

今日のモブの最後で、CSSのリセットと言いつつ、リセットじゃないよね。実際はノーマライズか？という話が出ます。

## トップページを作る

では、先日作ったヘッダーページに項目を順次付け加えていきます。

まずは、背景を貼り付けます。もっとさんがまだ来てなかったので、とりあえずFigmaから画像を取ってきて貼り付けます。FigmaのExportで画像を保存します。

前回のヘッダーに背景を付けます。そのあと、もろもろ調整を進めていきます。

基本的には、これまでと同様に、必要な項目を記載し、CSSを当てていくという作業になります。試行錯誤しつつ、これでいける？ダメか。OK？　いった。じゃあこれで、みたいな会話が続きます。

CSSに強い人がいるので、様々なノウハウを投下しつつサクサク進んでいきます。いいですね。

#### [column] 小ネタ:ボタンとボタンの間の間隔を設定する
ボタンとボタンが並んだときだけ効かせるということができます。ボタンとボタンの間には少しスペース欲しいですよね。

```css
.button+.button{
    margin-left : 10px;
}
```

これを使うと、左端にボタンをつけたい場合に変なスペースが入ったりしませんし、ボタン1個だけのときなどは何も起こらないです。1個づつスペースを設定するなどの手動でカバーな感じはやめましょ。

#### [/column]

ロゴ、新規登録、ログインボタン、背景画像、サークル名が乗ったヘッダーができました。

同様にして（というには紆余曲折があるのですが）、サークルの頒布物の欄、参加イベントや各種リンク（Twitterやサークルページ）を追加していきます。

#### [column] 小ネタ:リファクタリングに便利な機能
変数名などを変更する場合、宣言部分と参照している部分がありますが、同時に全てを変更する必要があります。このとき、VSCodeでは、F2を押しながら変更すると、全てを同時に修正してくれる機能があります。

検索して一括置換などもありますが、リファクタリング、修正のスピードが上がるので、覚えておくとお得です。
#### [/column] 

あとは、忘れずにコミットし、本日おしまいです。

ここで、進捗を公開できないか？　という提起をしたところ、Next.jsのデプロイが必要なこと、ダミーで使っている素材に未購入なものがあるなどの理由により、このタイミングでのティザーとしての公開は見送られました。8月上旬をめどに公開する予定です。

## まとめ
CSSをがっつりいじるという今回のモブでした。ここには書き切れなかったノウハウもたくさんあり、アイテムひとつづつ調整しながら組み立て、作っていくという感じで進んだ今回のモブです。かなりそれっぽくなりましたね。

今回は実に三時間以上のワークでした。疲れましたね…

![7月11日のFun done learn](chap-mob-0711/0711fundonelearn.png?scale=0.8)