# モブ11回目(7月18日)

11回目のモブです。

## ユーザー権限についての議論
トップページを作るにあたって、メンバー、寄稿者の扱いについての相談です。

![サークル管理画面](chap-mob-0718/circleConfig.png?scale=0.8)

サークルのメンバー管理画面のワイヤフレームが届きました。素敵ですね。

まず、オーナーという表記に異論はありませんね。サークル主を意味しますが、主という表現は少し慣用表現的ですし、権限が明確にわかるでしょう。「編集者」は、サークル情報が編集できる人、メンバーはサークルページにアイコンが表示されるだけということで(権限すくなめの)寄稿者を想定しています。

ただし、編集者は、役割としての編集者を想定しますので、情報編集権限つきのメンバー、表示のみの寄稿者がよさそう、という話で落ち着きます。

直観的に、名は体を表してほしいと考えるのが適切です。また、あまり考えたくはありませんが、勝手に代表権限を移譲して主を追い出す、サークルページを乗っ取るなんてことができてしまうと困ります。権限回りについては後日きちんと相談する必要があるでしょう。

ただし、通常のサークルであれば、サークル主がいて。ほかににメンバーが一人か二人程度、あるいは一人サークルも珍しくありません。寄稿者がたくさんいて、なんなら様々なワークも手伝ってくれたりする人がたくさんいる親方Projectがエッジケースであることは間違いありません。しかもそのエッジケースがステークホルダーであるという厄介な問題を抱えています。このエッジケースに引きずられすぎないように適切に検討していきましょう。

## サークルページ製作続き
サイドのイベントバナーなどを作り込んでいきます。前回の続きですね。

ところで対応ブラウザの話もでました。今時IE対応は不要だよね、ということで一致します。工数莫大に増えますし、会社などで制約がある場合くらいしか使いませんよね・・・

別件で調べてみたところ、Chromeのシェアが半分近く、あとはSafariなどが5～10%でどんぐりという状況。

### CSS Variablesがすごく良かった
CSS Variablesを試してみます。これは、CSSの中で変数を使うものです。

```css variables.css
:root {
  --brand-color: #ffc107;
  --page-width: 980px;
}
```

```css index_modules.css
.badge {
  background-color: var(--brand-color);
```

という形で、variables内で色を定義し、変数として参照することができるというものです。

メディアによって幅を変更するなどの場合にも使えそうです。そして、これができるということで、テーマが不要になるのではないか？というはなしが出ます。

通常、様々な環境に対応する場合、テーマを設定して行うことが多いのに対し、環境対策は動的にいじる必要がありません。したがって、全体を書き換えるテーマは過剰機能であるといえるというのがその根拠です。

Paddingやフォントサイズなども随時指定してきましたが、これらも変数として扱うことができますので、順次variablesに書き換えていくことにします。

resetCSSと思いきや、NormarizeCSSといった挙動になっているので、いろいろ書き換えていきます。一旦サークルページはほぼ完成ですね。

## .bashの設定
なぜかNode.jsのバージョンが変わってしまう（8系になってしまう）ということで、起動のたびに最新にしていたのですが、何かおかしいという事で、ホストの環境を確認します。

そもそものきっかけは、インデント整形ツールをインストールしようとしたことです。

```sh
npx prettier
prettier requires at least version 10.13.0 of Node. Please update
```

上記コマンドでPrettierをインストールしようとしたことによります。ところが、Node.jsのバージョンが対応しないという旨のエラーが出ました。起動時にバージョンをあげているにも関わらず、nodeのバージョンが8.15.0になってしまうという状況でした。

そこで、まずはNodeのバージョンを固定します。

```sh
$ code ~/.bashrc
```

bashの設定ファイルを開き、Ver12系に固定するようにします。`nvm use 12`を追記して、nodeの12に固定します。本来ならこれで固定されるはずが、新しく開いたターミナルでは、走っているバージョンが8.15.0になってしまうという状態です。これは挙動としておかしいので、いろいろ確認、設定をしていきます。ターミナルでzshという記載があるためbashではないのではないか、あるいは設定ファイルが違うのではないか？という確認もしました。

```sh
$ export |grep SHELL
declare -x SHELL="/bin/bash"
```

使っているシェルを確認し、確かにbashであることが確認できました。次は、.bashrcにechoで適当な文字列を入れて、.bashrcが走っている事を確認します。ターミナル上でnow running node 12表示されたため、確実にNode12になっているにもかかわらず、バージョン確認をすると8に戻ってしまうという状況です。謎い。

`.bash_profile`も確認します。

もっとさんから、デフォルトを変更するコマンドの提案がなされますが、やっぱりだめです。デフォルトは12系になっていることは確認できたものの、なぜか8になってしまいます。

一旦Node8をアンインストールしてみます。使ってないので問題ないはず。

```sh
$ nvm uninstall 8.15.0
$ node -v
-bash node　command not found
```

Node8をアンインストールしてみると、Nodeそのものが見つからないというエラーとなりました

結果として、.bash_profileを再確認したところ、Pathの中に、Path=の中に、8.15.0に上書きしている行があることが判明しました。これを消して、Nodeのバージョン問題は解決しました。なお、消しすぎについて確認をして、完了です。

これは、昔別の環境構築をしようとした試行錯誤の結果とのことでした。Pathの扱いを棚ぼたで知れたモブワークでした。予想外の動きがある場合、こういうところに原因があることもあるんですね・・・

Prittierをインストールして、動くことを確認して、めでたしめでたし。

```sh
npx pretter --write src
git diff
```

あらためて、Pretterはインデント整形のツールです。いろいろ書いているとインデントがズレてくることがありますので、これをきれいにしてくれます。

Pretterを走らせ。差分を見ましょう。インデントが４から２になって、インデント整形が完了しました。めでたしめでたし。本来は毎回回すようにして、大量のdiffが出ないようにすると良いでしょう。

これももう一度Pushして、本日のワークは完了です。

また、VSCodeは頻繁に更新しましょう。古くていいことはほとんどないので。


#### [column] 折り返し設定のショートカット　Alt+Z
VScodeで、Alt+Z(MacだとOption+Z)で全幅で自動改行をON/OFFできます。

Wordwrapを切り替えもできますが、ショートカットキーを覚えておくと便利です。

参加者からも、知らなかった…とつぶやきが出ましたが、こういうのもモブのメリットかもしれませんね。

#### [/column]

## サークルページのデザインについての相談
もっとさんからの提起で、サークルの色やアイコンについての相談に移ります。

サークルのアイコンというものは基本存在しませんし、新しく作ったりするのも大変です。テーマカラーを任意に設定できるようにしたいとか出ます。Boothやとらのあなのアイコンが非常に強く、浮いて見えてしまうという問題も出てきます。そして、サークルカラーを選ぶ必要があることから、単純に選択項目、データが増えてしまい単純に記入が面倒という問題も生じます。

サークルアイコンを作るという文化をギポタル発で作り上げるという案も出てきます。サークル識別をいかに実装するか、です。

ユーザーアイコンを丸で、サークルアイコンを四角で作るという案も出ますが、「サークルなのに四角？」なんて話も出つつ・・・

サークルバナーがあるならそれも貼りたいし、同人誌というドメインでは持ってる人/サークルがほとんどいないという現状を考えると、なしというものアリでしょう。ページのデザイン上も様々なケースを考えなければならくなってしまいますので大変ですので、一旦なしの方向で進めます。

## まとめ



![7月18日のFun done learn](chap-mob-0718/0718fundonelearn.png?scale=0.8)


次回いつやる？の話のなかで、「メンションしてくれ」という話が出ました。「えぇ・・・予定決めてるんだから自分で管理してよ・・・」魂の叫びが出たりもしました。

4連休はお休みです。