# 1ヶ月ぶりのモブワークで振り返り・タスク整理をした（モブワーク#16:2020/9/24）

技術書典9S[^tbf9]（オンライン開催）の期間が終了し、約1ヶ月ぶりにモブワークが復活しました。

[^tbf9]: 技術書典9　2020年9月12日～9月22日　https://techbookfest.org/event/tbf09

今回は参加者が少ないこともあり、「これまでの振り返り」と「これからやるべきこと」の整理を中心にモブワークをすすめました。

## ローカル環境構築をする

ひさしぶりのモブワークなので、まずはローカル環境の起動確認から行います。実は参加者全体に起動コマンド・手順が周知できていないことが判明しました。まずは環境構築手順の確認から行きましょう。Hasuraの認証回りでもコケていることが分かったので、そのあたりの確認を進めます。これまで何となく動いていたのですが、一本道で環境構築までやる手順を確認していくことには十分意味があります。

参加者ですら、ここまでの内容をやるにはいくつかエラーが出るようです。3000番ポートが使われているというエラーが出たりもしました。それ以外にも、エラーが出たり、うまく動かなかったりもしました。

![エラー出た](chap-mob-0924/error1.png)

ローカルのソースコード上には、Hasuraへのアクセス権やパスワードが入ってなかったりするなど、全く同じというわけではありません。本番環境とローカルをシームレスにつなぎたいところですが、いつでも同じとできるわけではありませんね。難しいところです。

作業時はとりあえずローカル環境を復旧させ、作業後にインストール〜ローカル環境起動のコマンドが下記のように整理されました。

```
　# パッケージのインストール
$ npm i
　# 設定ファイルを準備
$ cp .env.example .env
　# ローカルでHasuraを立ち上げる
$ docker-compose up
　# データベースのマイグレーションを適用する
$ npm run hasura migrate apply
　# メタデータ（Hasura 固有の設定）を適用する
$ npm run hasura metadata apply
　# 必要なコード生成をする
$ npm run codegen
　# 開発モードで起動する ※3000 番ポートを空けていること
$ npm run dev
　# Hasura Consoleを起動する ※9695 番ポートを空けていること
$ npm run hasura console
```

## これまで出来たことを振り返り・整理する
ローカル環境の立ち上げが無事に成功したため、目標の1つである振り返りをおこないました。
これまで企画〜実装過程でどの辺りが「できている」のかを明確にして、今後のステップを把握するのが目的です。
そして、現在のギポタルサイトで作ることが出来ている部分を整理すると下記のようになりました。

![作業の振り返り](chap-mob-0924/reflection.jpg?scale=0.4)


## これからやるべきことを整理する
また、次の目標である「やるべきこと」も整理しました。
先程の「できていること」の整理で把握した内容を基に、企画内容から今後のMVP作成までに実装すべき機能を洗い出すのが目的です。
結果、「やるべきこと」は機能ごと、作業内容ごとに下記のように振り分け・色分けしました。

![これからやるべきこと](chap-mob-0924/todo.jpg?scale=0.8)

## 次回やることを決める
スムーズにやることリストが出来上がったので、次回モブから始めることも選んでみました。
次回からはフロントエンドの「サークルページ作成機能」を作るため、下記2点を行うことになりました。

1. APIごしにサークルデータを読み込む
2. Firebaseに画像を登録し、その画像をサークルページに表示可能にする

![次回やること](chap-mob-0924/nextaction.jpg?scale=0.4)

## Firebase利用用にGoogoleアカウントを作成する

今後、利用サービスの支払いを一括化させるためにGoogle系サービスを利用しようという話になり、ひとまずGoogleアカウントを作成することになりました。

加えて、次回作成予定の画像アップロード機能の器であるCloud Firestoreの初期設定を行いました。